{
  "title": "DMP_common_metadata",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "project_name",
    "funding_agency",
    "dmp_format"
  ],
  "properties": {
    "project_name": { "type": "string"},
    "description":{"type":"string"},
    "funding_agency": {
      "type": "array",
      "items": { "$ref":"#/definitions/organization"}
    },
    "dmp_format": {
      "type": "string",
      "enum": ["common metadata"]
    },
    "repository": { "$ref":"#/definitions/urlentity"},
    "e-Rad_project_id": {"type": "string"},
    "publish_date":{ "$ref":"#/definitions/date"},
    "creator": {
      "type": "array",
      "items": { "$ref":"#/definitions/person"}
    },
    "hosting_institution": { "$ref":"#/definitions/organization"},
    "data_manager": { "$ref":"#/definitions/person"},
    "license":{
      "type":"array",
      "items":{ "$ref":"#/definitions/license"}
    },
    "access_rights": { "$ref":"#/definitions/access_rights"},
    "free_or_consideration": { "$ref":"#/definitions/free_or_consideration"},
    "available_from":{ "$ref":"#/definitions/date"},
    "citation_info": { "type": "string" },
    "download_url":{ "$ref":"#/definitions/urlentity"},
    "research_field": {"type": "string"},
    "dmp": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["data_number", "title", "access_rights"],
        "additionalProperties": false,
        "properties": {
          "data_number": { "type": "integer" },
          "title": { "type": "string" },
          "description": { "type": "string" },
          "repository": { "$ref":"#/definitions/urlentity"},
          "data_type": { "type": "string" },
          "creator": {
            "type": "array",
            "items": { "$ref":"#/definitions/person"}
          },
          "max_filesize":{ "type": "string" },
          "hosting_institution": { "$ref":"#/definitions/organization"},
          "data_manager": { "$ref":"#/definitions/person"},
          "license":{ "$ref":"#/definitions/license"},
          "access_rights": { "$ref":"#/definitions/access_rights"},
          "free_or_consideration": { "$ref":"#/definitions/free_or_consideration"},
          "available_from":{ "$ref":"#/definitions/date"},
          "citation_info": { "type": "string" },
          "download_url":{ "$ref":"#/definitions/urlentity"}
        }
      }
    },
    "dataset":{
      "type":"array",
      "items":{
        "type":"object",
        "additionalProperties": false,
        "required":["name","path","dmp"],
        "properties":{
          "name": { "type": "string" },
          "path": { "type": "string" },
          "size": { "type": "string" },
          "format": { "type": "string" },
          "dmp":{"type":"integer"},
          "url":{ "$ref":"#/definitions/url"}
        }
      }
    }
  },
  "definitions":{
    "url":{
      "type":"string",
      "format":"url"
    },
    "date":{
      "type":"string",
      "format":"date"
    },
    "organization":{
      "type": "object",
      "additionalProperties": false,
      "required": ["name"],
      "properties": {
        "name": { "type": "string" },
        "url": { "$ref":"#/definitions/url"},
        "ror": { "$ref":"#/definitions/url"},
        "address": { "type": "string" }
      }
    },
    "person":{
      "type": "object",
      "additionalProperties": false,
      "required": ["name"],
      "properties": {
        "name": { "type": "string" },
        "orcid": { "$ref":"#/definitions/url"},
        "url": { "$ref":"#/definitions/url"},
        "email": { 
          "type":"string",
          "format":"email"
        },
        "affiliation": { "$ref":"#/definitions/organization"},
        "e-Rad_researcher_number": {
          "type": "string",
          "pattern": "[0-9]{8}"
        },
        "telephone": {"type": "string"}
      }
    },
    "license":{
      "type":"object",
      "additionalProperties": false,
      "required":["name"],
      "properties":{
        "name":{"type":"string"},
        "url":{ "$ref":"#/definitions/url"},
        "description": {"type":"string"}
      }
    },
    "access_rights":{
      "type": "string",
      "enum": [
        "open access",
        "restricted access",
        "embargoed access",
        "metadata only access"
      ]
    },
    "free_or_consideration": {
      "type": "string",
      "enum": ["free", "consideration"]
    },
    "urlentity":{
      "type":"object",
      "additionalProperties": false,
      "required":["name","url"],
      "properties":{
        "name":{"type":"string"},
        "url":{ "$ref":"#/definitions/url"},
        "description": {"type":"string"}
      }
    }
  }
}